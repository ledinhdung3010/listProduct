(self.miniJsonp=self.miniJsonp||[]).push([[8592],{88377:function(e,t,r){var n,o,c,u,a,i,s,l,f,d,p;e.exports=(n=r(34857),o=r(20573),c=r(29494),u=r(96961),a=r(6678),i=r(82677),s=r(38104),l=r(58518),f=r(44900),d=r(67429),p=r(36808),function(){"use strict";var e={701:function(e,t,r){r.d(t,{t:function(){return c}});var n=r(661),o=r.n(n),c=o().t.bind(o())},661:function(e){e.exports=l},598:function(e){e.exports=p},383:function(e){e.exports=i},252:function(e){e.exports=a},944:function(e){e.exports=n},975:function(e){e.exports=o},783:function(e){e.exports=s},644:function(e){e.exports=u},855:function(e){e.exports=c},672:function(e){e.exports=f},459:function(e){e.exports=d}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var S={};return function(){r.r(S),r.d(S,{addNeedCaptchaRequest:function(){return Eo},agentConversationEntitiesSelector:function(){return i},allMessageShortcutGroupsSelector:function(){return en},authorizedShopsCountSelector:function(){return Ne},autoTranslation:function(){return Sn},batchRemoveDraftHandler:function(){return qe},batchUpdateRecord:function(){return H},captchaSignatureSelector:function(){return le},captchaVerifyReducer:function(){return Do},captchaVisibleSelector:function(){return se},checkUserPermissionSaga:function(){return lr},checkUserPermissionSucceeded:function(){return ir},clearNeedCaptchaRequest:function(){return go},clearReportRequested:function(){return Jn},contactsEntitiesSelector:function(){return O},conversationEntitiesSelector:function(){return a},conversationsLengthLevelSelector:function(){return v},copySucceedFeedback:function(){return Nr},curTabFocusedSelector:function(){return be},currentAllMessageShortcutsSelector:function(){return un},currentGroupIdSelector:function(){return Zr},currentGroupTypeSelector:function(){return $r},currentMessageShortcutGroupsSelector:function(){return nn},currentUserDistributionStatusSelector:function(){return Ae},currentUserIdSelector:function(){return X},currentUserIsSellerSelector:function(){return je},currentUserRoleSelector:function(){return Te},currentUserSelector:function(){return Se},currentUserShopIdSelector:function(){return he},currentUserShopSelector:function(){return me},deleteCaptchaRequest:function(){return _o},deleteConfigDurationSelector:function(){return ne},deleteConfigSelector:function(){return ae},deleteConversationSucceedHandler:function(){return Ge},deleteRecord:function(){return M},displayCBCBannerSelector:function(){return On},distributionAccountStatusSelector:function(){return gn},draftHashSelector:function(){return jn},entitiesSelector:function(){return c},entityReducer:function(){return q},fetchSettings:function(){return hn},fetchSettingsStatusSelector:function(){return Ln},fetchShopAuth:function(){return br},fetchShopsByIds:function(){return Rr},fetchedShopIdsSelector:function(){return vr},forceLogoutRequested:function(){return Ht},forwardGroupMembersSelector:function(){return T},forwardGroupsEntitiesSelector:function(){return m},getConversationLastMessage:function(){return lt},getDraft:function(){return xn},getShopUnreadCountByIds:function(){return Tr},getTimestamp:function(){return tt},getToastInformation:function(){return wr},handle401ErrorRequested:function(){return Cn},handleLoginSucceededLogic:function(){return Qt},handleMessageSubscribe:function(){return ze},hasDeletePermissionSelector:function(){return re},hasFetchedUnreadSelector:function(){return Ue},hasReplyPermissionSelector:function(){return te},hasVerifyPhoneNumberNormalSellerSelector:function(){return xe},hasVerifyPhoneNumberSelector:function(){return Le},hasVerifyPhoneNumberSubaccountSelector:function(){return ke},hasVideoPermissionSelector:function(){return ee},hideFeedbackSelector:function(){return ue},isCBSellerSelector:function(){return ge},isMainPageSelector:function(){return Re},isSubAccountSelector:function(){return _e},judgeUndefined:function(){return rt},legacyMessageShortcutsCountSelector:function(){return _n},loadingSelector:function(){return J},localeSelector:function(){return Ee},login:function(){return qt},loginRequested:function(){return xt},loginSucceeded:function(){return kt},loginSuccessSelector:function(){return Pe},logout:function(){return pr},logoutHandler:function(){return dr},logoutRequested:function(){return Lt},logoutSucceeded:function(){return Mt},messageEntitiesSelector:function(){return s},messageShortcutGroupEntitiesSelector:function(){return E},messageShortcutGroupHttpStatusSelector:function(){return Xr},messageShortcutGroupSelector:function(){return Jr},messageShortcutsSelector:function(){return sn},messageShortcutsStatusSelector:function(){return En},messagesLengthLevelSelector:function(){return h},networkStatusSelector:function(){return Z},newMessageFlagSelector:function(){return de},newbieSelector:function(){return $},notificationTypes:function(){return ft},offerSelector:function(){return Nn},offersSelector:function(){return wn},openMallUrl:function(){return An},openMallUrlSaga:function(){return bn},orderEntitiesSelector:function(){return f},personalMessageShortcutGroupsSelector:function(){return tn},personalMessageShortcutsSelector:function(){return on},productEntitiesSelector:function(){return d},productsSelector:function(){return qn},pureActionHandler:function(){return $e},pureMergeActionHandler:function(){return Ze},rateCardEntitiesSelector:function(){return _},reduxReset:function(){return In},relatedOfferIdsSelector:function(){return Un},removeSingleDraftHandler:function(){return Qe},reportArraySelector:function(){return Bn},reportMessageApiTimer:function(){return ot},reportReducer:function(){return io},reportRequested:function(){return zn},resendMessagePayloadSelector:function(){return fe},resendNeedCaptchaRequest:function(){return Oo},saveDraftHandler:function(){return Be},setToastInformation:function(){return Ir},setToastInformationSaga:function(){return Lr},settingsFetchStatusSelector:function(){return pn},settingsNeedForceUpdateSelectors:function(){return fn},settingsSelector:function(){return ln},settingsStatusSelector:function(){return dn},shopSelector:function(){return Or},shopStatisticsMapSelector:function(){return Oe},shopStatisticsSelector:function(){return ve},shopTranslationSettingsSelector:function(){return kn},shopsEntitiesSelector:function(){return g},shopsUnreadConversationCountSelector:function(){return B},showAutoHangupModalSelector:function(){return Ie},showChatWindowSelector:function(){return ye},showConversationDetailSelector:function(){return Ce},showCrrDueSelector:function(){return ce},showEntrySelector:function(){return we},showShop:function(){return Ar},sortConversations:function(){return et},sortedAllMessageShortcutsSelector:function(){return an},stickerEntitiesSelector:function(){return l},subaccountHasUnrepliedPermissionSelector:function(){return ie},takeEveryWithCancel:function(){return wo},teamMessageShortcutGroupsSelector:function(){return rn},teamMessageShortcutsSelector:function(){return cn},textBoxHeightSelector:function(){return De},timerHandler:function(){return to},toastReducer:function(){return Kr},toastSelector:function(){return yr},totalUnreadConversationsCountSelector:function(){return K},unreadCountActions:function(){return Y},updateChatEntryStatus:function(){return ht},updateChatWindowStatus:function(){return gt},updateConversationDetailStatus:function(){return Ot},updateConversationListsHash:function(){return yn},updateCurTabFocused:function(){return er},updateCurTabFocusedSaga:function(){return rr},updateCurTabFocusedSucceeded:function(){return tr},updateEntities:function(){return k},updateHasFetchedUnread:function(){return mt},updateIsMainPage:function(){return Zt},updateLoginSuccessStatus:function(){return vt},updateNetworkStatus:function(){return Et},updateOrReplaceAction:function(){return Vn},updateRecord:function(){return L},updateShowAutoHangupModal:function(){return _t},updateStatusSelector:function(){return Mn},userEntitiesSelector:function(){return u},userReducer:function(){return gr},userSelector:function(){return pe},verifyRequestsSelector:function(){return yo},voucherEntitiesSelector:function(){return p},waitingTimeFilterSelector:function(){return oe},watchHandleUrlSagas:function(){return Pn},watchLogin:function(){return Bt},watchReportSagas:function(){return ao},watchTab:function(){return nr},watchToastSagas:function(){return Br},watchUserSagas:function(){return _r},watchVerifySagas:function(){return Co}});var e=r(944),t=r(975),n=r(855),o=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},c=function(e){return e.entityReducer},u=(0,t.createSelector)(c,(function(e){return e.users})),a=(0,t.createSelector)(c,(function(e){return e.conversations})),i=(0,t.createSelector)(c,(function(e){return e.agentConversations})),s=(0,t.createSelector)(c,(function(e){return function(e){return(0,n.checkEmptyObject)(e)?{}:e}(e.messages)})),l=(0,t.createSelector)(c,(function(e){return e.stickers})),f=(0,t.createSelector)(c,(function(e){return e.orders})),d=(0,t.createSelector)(c,(function(e){return e.products})),p=(0,t.createSelector)(c,(function(e){return e.vouchers})),E=(0,t.createSelector)(c,(function(e){return e.messageShortcutsGroups})),_=(0,t.createSelector)(c,(function(e){return e.rateCards})),g=(0,t.createSelector)(c,(function(e){return e.shops})),O=(0,t.createSelector)(c,(function(e){return e.contacts})),v=(0,t.createSelector)(a,i,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return o(r)})),h=(0,t.createSelector)(s,(function(e){return o(Object.keys(e).length)})),m=(0,t.createSelector)(c,(function(e){return e.groups})),T=(0,t.createSelector)(c,(function(e){return e.groupMembers}));function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,c=[],u=!0,a=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return c}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C,y=r(644);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(C||(C={}));var U,N,I=A({},C.UPDATE_ENTITIES,(function(e,t){var r=t.payload.entities;return Object.entries(r).reduce((function(e,t){var r=D(t,2),n=r[0],o=r[1];return"persist"!==n?("shops"===n&&y.shopService.updateShopMap(o),w(w({},e),{},A({},n,w(w({},e[n]),o)))):w(w({},e),{},A({},n,o))}),e)})),j=r(252),x=(0,j.createActions)((A(U={},C.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),A(U,C.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),A(U,C.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),A(U,C.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),U)),k=x.updateEntities,L=x.updateRecord,M=x.deleteRecord,H=x.batchUpdateRecord;function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=(A(N={},C.UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=r.record;return G(G({},e),{},A({},n,G(G({},e[n]),{},A({},o,G(G({},e[n][o]),c)))))})),A(N,C.DELETE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=e[n];return delete c[o],G(G({},e),{},A({},n,c))})),A(N,C.BATCH_UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.records,c=r.checkProp,u=G({},e[n]);return Object.keys(o).forEach((function(e){(!c||c&&o[e][c]>u[e][c])&&(u[e]=G(G({},u[e]),o[e]))})),G(G({},e),{},A({},n,u))})),N);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=(0,j.handleActions)(Q(Q({},I),V),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},persist:null,vouchers:{},messageShortcuts:{}}),B=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.shopsUnreadConversationCount)||0},K=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.totalUnreadConversationsCount)||0},Y={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"},z=r(383),J=function(e){return e.userReducer.loading},X=function(e){return e.userReducer.currentUserId},$=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.newbie)||[]},Z=function(e){return e.userReducer.networkStatus},ee=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasVideoPermission)||!1},te=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasReplyPermission)||!1},re=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hasDeletePermission)||!1},ne=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.deleteConfigDuration)||0},oe=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.waitingTimeFilter)||!1},ce=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.showCrrDue)||!1},ue=function(e){var t;return(null==e||null===(t=e.userReducer)||void 0===t?void 0:t.hideFeedback)||!1},ae=function(e){var t=(null==e?void 0:e.userReducer)||{},r=t.hasDeletePermission,n=void 0!==r&&r,o=t.deleteConfigVersion,c=void 0===o?0:o,u=t.deleteConfigDuration;return{hasDeletePermission:n,deleteConfigVersion:c,deleteConfigDuration:void 0===u?0:u}},ie=function(e){return e.userReducer.subaccountHasUnrepliedPermission},se=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaVisible)||!1},le=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.captchaSignature)||""},fe=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.resendMessagePayload)||void 0},de=function(e){return e.userReducer.newMessageFlag},pe=function(e){return(0,t.createSelector)(c,(function(t){return(0,z.denormalize)(e,y.userSchema,{users:t})}))},Se=(0,t.createSelector)(u,X,(function(e,t){return(0,z.denormalize)(t,y.userSchema,{users:e})||{}})),Ee=(0,t.createSelector)(Se,(function(e){return e&&e.locale})),_e=(0,t.createSelector)(Se,(function(e){return!(0,n.checkEmptyObject)(e)&&e.type===n.AccountType.SUBACCOUNT})),ge=(0,t.createSelector)(Se,(function(e){return!(0,n.checkEmptyObject)(e)&&e.is_cb})),Oe=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.shopStatisticsMap)||{}},ve=function(e,r){return(0,t.createSelector)(Oe,(function(t){return t["".concat(e,"-").concat(r)]||{}}))},he=(0,t.createSelector)(Se,_e,(function(){return(arguments.length>1?arguments[1]:void 0)?void 0:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shop_id})),me=(0,t.createSelector)(Se,_e,g,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?void 0:(0,z.denormalize)(e.shop_id,y.shopSchema,{shops:t})||{}})),Te=(0,t.createSelector)(Se,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).role||""})),Ae=(0,t.createSelector)(Se,(function(e){return e&&e.distribution_status||""})),Re=function(e){return e.userReducer.isMainPage},be=function(e){return e.userReducer.curTabFocused},De=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.textBoxHeight)||0},Ce=function(e){return e.userReducer.showConversationDetail},ye=function(e){return e.userReducer.showChatWindow},Pe=function(e){return e.userReducer.loginSuccess},we=function(e){return e.userReducer.showEntry},Ue=function(e){return e.userReducer.hasFetchedUnread},Ne=(0,t.createSelector)(Se,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).authorizedShopsCount||0})),Ie=function(e){return e.userReducer.showAutoHangupModal},je=(0,t.createSelector)(Se,_e,(function(){return!!(arguments.length>1?arguments[1]:void 0)||(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).is_seller})),xe=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumber)||!1},ke=function(e){var t;return(null==e||null===(t=e.userRelatedReducer)||void 0===t?void 0:t.hasVerifyPhoneNumberMap)||{}},Le=(0,t.createSelector)(_e,xe,ke,(function(e,t,r){return e?r:t}));function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fe=function(e,t){var r=new Set(t);return r.delete(e),Array.from(r)},Ge=function(e,t){var r=t.payload.conversationId,n=He(He({},e.conversationIdsMap),{},A({},r,!1)),o=Fe(r,e.conversationIds),c=Fe(r,e.pinnedConversationIds),u=e.currentConversationId;return He(He({},e),{},{currentConversationId:u===r?null:u,conversationIds:o,pinnedConversationIds:c,conversationIdsMap:n})};function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe=function(e,t){var r=t.payload.conversationId,n=We({},e.draftHash);return delete n[r],We(We({},e),{},{draftHash:n})},qe=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=We({},e.draftHash);return n.forEach((function(e){delete o[e]})),We(We({},e),{},{draftHash:o})},Be=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,c=We({},e.draftHash);return c[n]=o,We(We({},e),{},{draftHash:c})},Ke=r(783),Ye=regeneratorRuntime.mark(ze);function ze(t){var r,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=t.payload,o=t.type,c.next=3,(0,e.spawn)(ot,r.request_id);case 3:if(o!==n.ConversationTypeEnum.Agent){c.next=8;break}return c.next=6,(0,e.put)((0,Ke.receiveAgentMessageRequested)({message:r}));case 6:c.next=10;break;case 8:return c.next=10,(0,e.put)((0,Ke.receiveMessageRequested)({message:r}));case 10:case"end":return c.stop()}}),Ye)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $e=function(){return function(e,t){var r=t.payload;return Xe(Xe({},e),r)}},Ze=function(e){return function(t,r){var n=r.payload;return Xe(Xe({},t),{},A({},e,Xe(Xe({},t[e]),n)))}},et=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},tt=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},rt=function(e){var t=e.defaultValue,r=e.value;return void 0===r?t:r},nt=regeneratorRuntime.mark(ot);function ot(e){var t,r,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,n.getItem)(e);case 2:(t=c.sent)&&(r=new Date,o=+r-+t,(0,y.collectAsyncTask)(y.ReportPoint.MESSAGE_SOCKET,o),(0,n.removeItem)(e));case 4:case"end":return c.stop()}}),nt)}var ct,ut,at,it=r(701).t,st=n.MessageTypes.MSG_TYPE_TEXT,lt=function(e,t,r){var o=e.all||[],c=e.sending||[],u=e.failed||[],a=o.length,i=null;if(a){for(var s=0,l=null;s<a&&!l;){var f=e.all[s];(l=(0,z.denormalize)(f,y.messageSchema,{messages:r}))&&(l.type===n.MessageTypes.MSG_TYPE_SECURITY_TIPS||l.isFaking)&&(l=null),s++}l&&l.created_timestamp>Math.floor(t.last_message_time_nano/Math.pow(10,9))&&(i=(0,n.fillMessagePreview)(l))}if(!i){var d=t.latest_message_id,p=t.latest_message_content,S=t.latest_message_type,E=t.last_message_option,_=t.latest_message_source,g=t.last_message_time_nano;(i={id:d,content:p,type:S,message_option:E,source:_,to_shop_id:t.latest_message_to_shop_id}).created_at=new Date(g/1e6)+""}var O=i,v=O.id,h=O.message_option,m=c.includes(v)?n.MessageSendStatus.SENDING:u.includes(v)?n.MessageSendStatus.FAILED:i.send_status?n.MessageSendStatus.SUCCEED:null;return(0,n.hasTargetMessageOption)(h,n.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(m=n.MessageSendStatus.FAILED,i.type=st,i.content={text:it("common.blacklist.replaced_text")}),(0,n.hasTargetMessageOption)(h,n.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(m=n.MessageSendStatus.FAILED),i.send_status=m,i},ft={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation",CTT_UPDATE:"ctt_update",HAVE_UNRATED_CSAT:"have_unrated_csat"};!function(e){e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED"}(ct||(ct={}));var dt,pt,St=(0,j.createActions)((A(ut={},ct.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),A(ut,ct.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),A(ut,ct.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{showChatWindow:e.showChatWindow}})),A(ut,ct.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){return{showConversationDetail:e.showConversationDetail}})),A(ut,ct.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),A(ut,ct.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),A(ut,ct.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),ut)),Et=St.updateNetworkStatus,_t=St.updateShowAutoHangupModal,gt=St.updateChatWindowStatus,Ot=St.updateConversationDetailStatus,vt=St.updateLoginSuccessStatus,ht=St.updateChatEntryStatus,mt=St.updateHasFetchedUnread,Tt=(A(at={},ct.UPDATE_NETWORK_STATUS,$e()),A(at,ct.UPDATE_SHOW_AUTO_HANGUP_MODAL,$e()),A(at,ct.UPDATE_CHAT_WINDOW_STATUS,$e()),A(at,ct.UPDATE_CONVERSATION_DETAIL_STATUS,$e()),A(at,ct.UPDATE_LOGIN_SUCCESS_STATUS,$e()),A(at,ct.UPDATE_CHAT_ENTRY_STATUS,$e()),A(at,ct.UPDATE_HAS_FETCHED_UNREAD,$e()),at),At=r(672),Rt=r(459),bt=r(598),Dt=r.n(bt);function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt=regeneratorRuntime.mark(Ft),wt=regeneratorRuntime.mark(Gt),Ut=regeneratorRuntime.mark(Qt),Nt=regeneratorRuntime.mark(qt),It=regeneratorRuntime.mark(Bt),jt=(0,j.createActions)((A(dt={},ct.LOGIN_REQUESTED,(function(){return{}})),A(dt,ct.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),A(dt,ct.LOGOUT_REQUESTED,(function(){return{}})),A(dt,ct.LOGOUT_SUCCEEDED,(function(){return{}})),A(dt,ct.FORCE_LOGOUT_REQUESTED,(function(){return{}})),dt)),xt=jt.loginRequested,kt=jt.loginSucceeded,Lt=jt.logoutRequested,Mt=jt.logoutSucceeded,Ht=jt.forceLogoutRequested;function Ft(t){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,e.call)(n.getItem,t);case 2:if(r.sent){r.next=6;break}return r.next=6,(0,e.call)(n.setItem,t,(0,Rt.v4)());case 6:case"end":return r.stop()}}),Pt)}function Gt(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=(0,n.getTranslationLocale)((0,n.getRuntimeLocale)()),o.next=3,(0,e.call)(y.getTranslation,{locale:t});case 3:return r=o.sent,o.next=6,(0,e.call)(n.changeLanguage,t,r);case 6:case"end":return o.stop()}}),wt)}var Vt=regeneratorRuntime.mark((function t(r){var o,c,u,a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=window.__CHATEASY_TRANSLATION__,(0,n.checkEmptyObject)(u)||(0,n.checkEmptyObject)(u.collection)?((i=Dt().get("language"))?c=n.localeInMallToTspLocale[i]||"en":(s=n.defaultLocalInMall[(0,n.getRuntimeRegion)()]||"en",c=n.localeInMallToTspLocale[s]||"en"),(0,y.collectAsyncTask)(y.ReportPoint.TRANSLATION_IN_SERVICE,0)):((0,y.collectAsyncTask)(y.ReportPoint.TRANSLATION_IN_HTML,0),a={},Object.keys(u.collection).forEach((function(e){a=Object.assign(a,u.collection[e])})),o=a,c=window.__CHATEASY_LOCALE__),o){t.next=14;break}return t.prev=3,t.next=6,(0,e.call)(y.getTranslation,{locale:c});case 6:o=t.sent,t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(3),t.next=13,(0,e.call)(y.getTranslation,{locale:(0,n.getTranslationLocale)((0,n.getRuntimeLocale)())});case 13:o=t.sent;case 14:return t.next=16,(0,e.call)(n.changeLanguage,c,o);case 16:return t.next=18,(0,e.call)(n.updateTimeLocale,(0,n.getServiceLocale)(c));case 18:case"end":return t.stop()}}),t,null,[[3,9]])})),Wt=regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.call)(Gt);case 2:return t.next=4,(0,e.put)(ht({showEntry:!0}));case 4:return t.next=6,(0,e.put)(vt({loginSuccess:!1}));case 6:(0,y.collectAsyncTask)(y.ReportPoint.LOGIN_FAILED,0,{type:(n=r,n instanceof y.InternalServerError?"InternalServerError":n instanceof y.Forbidden?"Forbidden":n instanceof y.Unauthoried?"Unauthoried":"Other")});case 7:case"end":return t.stop()}var n}),t)}));function Qt(t,r){var o,c,u,a,i,s,l,f,d;return regeneratorRuntime.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,o=r.godToken,c=t.user,u=c.id,a=c.type,i=c.locale,s=c.distribution_status,l=a===n.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||l&&"working"===s&&(window.__WEBCHAT_LOGIN__=!0),p.next=8,(0,e.call)(Vt,i||"en");case 8:return performance.mark("APP_RENDERING"),(0,y.collectLoadTask)(),(0,y.mdapConfig)(a),(0,y.configTrackerUser)(c),p.next=14,(0,e.put)(Et({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){At.store.dispatch(Et({networkStatus:"online"}))})),window.addEventListener("offline",(function(){At.store.dispatch(Et({networkStatus:"offline"}))})),window.addEventListener("message",(function(e){var t;if("captcha-modal"===(null===(t=e.data)||void 0===t?void 0:t.type)){var r,o,c,u;if(3===(null===(r=e.data)||void 0===r?void 0:r.status)){var a,i,s;console.log("==== event.data",e);var l=null===(a=e.data)||void 0===a?void 0:a.AC_CERT_D;l&&(0,n.isVisitingCn)()&&Dt().set("AC_CERT_D",l,{secure:!0,domain:"".concat(window.location.host),expires:new Date((new Date).getTime()+6e4)}),At.store.dispatch(Oo()),null===(i=(s=window).closeSFUCaptchaModal)||void 0===i||i.call(s)}1===(null===(o=e.data)||void 0===o?void 0:o.status)&&(At.store.dispatch(_o()),null===(c=(u=window).closeSFUCaptchaModal)||void 0===c||c.call(u))}}),!1),p.next=19,(0,e.put)(vt({loginSuccess:!0}));case 19:return p.next=21,(0,e.put)(ht({showEntry:!0}));case 21:return f=(0,y.normalize)("users",c),d=f.entities,p.next=24,(0,e.put)(k({entities:d}));case 24:if(o){p.next=27;break}return p.next=27,(0,e.call)(Ke.startConnect);case 27:return p.next=29,(0,e.put)(kt({currentUserId:u}));case 29:return p.next=31,(0,e.call)(lr);case 31:return p.next=33,(0,e.spawn)(Ft,"device_id");case 33:if(l){p.next=36;break}return p.next=36,(0,e.call)(Ke.fetchShopSettings,{payload:{shopId:c.shop_id}});case 36:p.next=42;break;case 38:return p.prev=38,p.t0=p.catch(0),p.next=42,(0,e.call)(Wt,p.t0);case 42:return p.prev=42,p.finish(42);case 44:case"end":return p.stop()}}),Ut,null,[[0,38,42,44]])}function qt(){var t,r,o,c,u,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,performance.mark("APP_PREPARED"),o={},c="",!window.__WEBCHAT_SESSION__){i.next=9;break}(0,y.collectAsyncTask)(y.ReportPoint.LOGIN_IN_HTML,0),o=window.__WEBCHAT_SESSION__,i.next=17;break;case 9:return(0,y.collectAsyncTask)(y.ReportPoint.LOGIN_IN_SERVICE,0),u={method:"POST",subServer:"coreapi",resource:"login"},a=(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)(),u.params={source:"pcmall"},a&&(u.parent="cbsc"),i.next=16,(0,e.call)(y.fetch,u);case 16:o=i.sent;case 17:return performance.mark("LOGIN_API_RESPONSED"),i.next=20,(0,n.setItem)("mini-session",o);case 20:return n.LS.setItem("mini-session",JSON.stringify(o)),n.LS.setItem("chat-locale",JSON.stringify(null===(t=o)||void 0===t||null===(r=t.user)||void 0===r?void 0:r.locale)),i.abrupt("return",{session:o,params:{godToken:c}});case 25:return i.prev=25,i.t0=i.catch(0),i.next=29,(0,e.call)(Wt,i.t0);case 29:return i.prev=29,i.finish(29);case 31:case"end":return i.stop()}}),Nt,null,[[0,25,29,31]])}function Bt(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeLatest)(xt,qt);case 2:return t.next=4,(0,e.takeLatest)(Lt,pr);case 4:return t.next=6,(0,e.takeLatest)(Ht,dr);case 6:case"end":return t.stop()}}),It)}var Kt,Yt,zt=(A(pt={},ct.LOGIN_SUCCEEDED,$e()),A(pt,ct.LOGOUT_SUCCEEDED,(function(e){return yt(yt({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),pt),Jt=regeneratorRuntime.mark(rr),Xt=regeneratorRuntime.mark(nr),$t=(0,j.createActions)((A(Kt={},ct.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),A(Kt,ct.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),A(Kt,ct.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{curTabFocused:e.curTabFocused}})),Kt)),Zt=$t.updateIsMainPage,er=$t.updateCurTabFocused,tr=$t.updateCurTabFocusedSucceeded;function rr(t){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.payload.focused)){n.next=6;break}return n.next=4,(0,e.call)(Ke.tabFocused);case 4:return n.next=6,(0,e.put)(Zt({isMainPage:!0}));case 6:return n.next=8,(0,e.put)(tr({curTabFocused:r}));case 8:case"end":return n.stop()}}),Jt)}function nr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(er,rr);case 2:case"end":return t.stop()}}),Xt)}var or=(A(Yt={},ct.UPDATE_IS_MAIN_PAGE,$e()),A(Yt,ct.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,$e()),Yt),cr=regeneratorRuntime.mark(lr);function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ir=(0,j.createActions)(A({},ct.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion,waitingTimeFilter:e.waitingTimeFilter,subaccountHasUnrepliedPermission:e.subaccountHasUnrepliedPermission,showCrrDue:e.showCrrDue,hideFeedback:e.hideFeedback}}))).checkUserPermissionSucceeded,sr={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1};function lr(){var t,r,n,o,c,u,a,i,s,l,f,d,p,S,E,_,g,O;return regeneratorRuntime.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,e.select)(Se);case 2:return t=v.sent,r=t.type,n=t.country,v.prev=4,v.next=7,(0,e.call)(y.fetch,{subServer:"coreapi",parent:"user",resource:"global_config"});case 7:return o=v.sent,u=(c=o||{}).video,a=c.reply,i=c.waiting_time_filter,s=c.show_crr_due,l=c.delete_msg,f=c.support_subaccount_unreplied,d=c.hide_feedback,(p=ar(ar({},sr),{},{hasVideoPermission:u,hasReplyPermission:a,waitingTimeFilter:i,showCrrDue:s,hideFeedback:d})).waitingTimeFilter=!1,"seller"===r?(E=(S=l||{}).config_version,_=S.region_config,g=void 0===_?[]:_,p.deleteConfigVersion=E,(O=g.find((function(e){return e.region===n})))&&O.duration&&(p.hasDeletePermission=!0,p.deleteConfigDuration=O.duration)):p.subaccountHasUnrepliedPermission=f,v.next=14,(0,e.put)(ir(ar({},p)));case 14:v.next=20;break;case 16:return v.prev=16,v.t0=v.catch(4),v.next=20,(0,e.put)(ir(ar({},sr)));case 20:case"end":return v.stop()}}),cr,null,[[4,16]])}var fr=A({},ct.CHECK_USER_PERMISSION_SUCCEEDED,$e()),dr=regeneratorRuntime.mark((function t(){var r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.length>0&&void 0!==r[0]&&!r[0]){t.next=4;break}return t.next=4,(0,e.call)(Ke.closeConnect);case 4:return t.next=6,(0,e.put)(Mt());case 6:return t.next=8,(0,e.put)(In());case 8:(0,n.removeItem)("mini-session"),(0,n.removeItem)("mini-sc_redirect");case 10:case"end":return t.stop()}}),t)})),pr=regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={server:(0,n.getSCApiServer)(),namespace:"",resource:"logout/",params:{SPC_CDS:Dt().get("SPC_CDS"),SPC_CDS_VER:2}},(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)()?(r.version="cnsc",r.parent="selleraccount"):r.version="v1",t.next=5,(0,e.call)(y.fetch,r);case 5:return document.location.replace("https://".concat((0,n.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){At.store.dispatch(Et({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){At.store.dispatch(Et({networkStatus:"offline"}))})),(0,y.clearApiCache)(),t.next=11,(0,e.call)(dr);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.handler?(0,e.call)(t.t0.handler):console.error("[Logout Failed] ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}));function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _r=[Bt,nr],gr=(0,j.handleActions)(Er(Er(Er(Er({},or),fr),Tt),zt),{networkStatus:"online",currentUserId:null,currentUser:{},curTabFocused:!0,isMainPage:!0,subaccountHasUnrepliedPermission:!1,showAutoHangupModal:!1,hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1,loginSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1}),Or=function(e){return(0,t.createSelector)(g,(function(t){return(0,z.denormalize)(e,y.shopSchema,{shops:t})}))},vr=function(e){var t;return(null==e||null===(t=e.shopReducer)||void 0===t?void 0:t.fetchedShopIds)||[]},hr=regeneratorRuntime.mark(Ar),mr=regeneratorRuntime.mark(br),Tr=function(e){return new Promise((function(t){(0,y.fetch)({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function Ar(t){var r,n,o,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r=t.payload.shopId,u.prev=1,u.next=4,(0,e.select)(Or(r));case 4:return n=u.sent,u.next=7,(0,e.call)(y.fetch,{resource:"shop",id:r,params:{need_cache:1,cache_expires:600}});case 7:return n=u.sent,o=(0,y.normalize)("shops",n),c=o.entities,u.next=11,(0,e.put)(k({entities:c}));case 11:return u.next=13,(0,e.put)((0,Ke.updateFetchedShopIds)({shopIds:[n.id]}));case 13:return u.abrupt("return",n);case 16:return u.prev=16,u.t0=u.catch(1),u.abrupt("return",{});case 19:case"end":return u.stop()}}),hr,null,[[1,16]])}var Rr=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){(0,y.fetch)({resource:"shop_list",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function br(t){var r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.payload.shopId,o.prev=1,o.next=4,(0,e.call)(y.fetch,{parent:"shop",parentId:r,resource:"auth"});case 4:return n=o.sent,o.abrupt("return",n);case 8:return o.prev=8,o.t0=o.catch(1),o.abrupt("return",{});case 11:case"end":return o.stop()}}),mr,null,[[1,8]])}var Dr,Cr,yr=function(e){return e.toastReducer.toast},Pr=r(701).t,wr=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=Pr("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=Pr("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?Pr("settings.failed_to_enable"):Pr("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?Pr("settings.message.save_successfully"):"delete"===t.action?Pr("settings.message.delete_successfully"):Pr("settings.message.import_successfully"):"save"===t.action?Pr("settings.message.failed_to_save"):"delete"===t.action?Pr("settings.message.failed_to_delete"):Pr("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?Pr("settings.failed_to_enable"):Pr("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?Pr("forward.exception",{forwardName:""}):Pr("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=Pr("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=Pr("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=Pr("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=Pr("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=Pr(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"claim-voucher-not-satisfy":r.message=Pr("voucher.claim.fail_not_satisfy_rule"),r.show=!0;break;case"claim-voucher-already-claimed":r.message=Pr("voucher.claim.fail_already_claimed"),r.show=!0;break;case"private-image":r.message=Pr("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=Pr(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(Dr||(Dr={}));var Ur=(0,j.createActions)((A(Cr={},Dr.COPY_SUCCEED_FEEDBACK,(function(){return{}})),A(Cr,Dr.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),A(Cr,Dr.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),Cr)),Nr=Ur.copySucceedFeedback,Ir=Ur.setToastInformation,jr=Ur.setToastInformationSucceeded,xr=regeneratorRuntime.mark(Lr),kr=regeneratorRuntime.mark(Mr);function Lr(t){var r,n,o,c,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.payload,n=r.type,o=r.error,c=r.toast,a.next=3,(0,e.select)(Ce);case 3:if(!a.sent){a.next=11;break}return u=null,n&&(u=wr(!1,{type:n})),void 0!==o&&(u=o instanceof y.CustomError||o instanceof y.Webview?o.handler():wr(!1,{type:"server-error-tips"})),c&&(u=c),a.next=11,(0,e.put)(jr({toast:u}));case 11:case"end":return a.stop()}}),xr)}function Mr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Ir,Lr);case 2:case"end":return t.stop()}}),kr)}var Hr=A({},Dr.SET_TOAST_INFORMATION_SUCCEEDED,$e()),Fr=r(701).t,Gr=regeneratorRuntime.mark(Wr),Vr=regeneratorRuntime.mark(Qr);function Wr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.put)(Ir({toast:wr(!0,{message:Fr("common.successful_copied")})}));case 2:case"end":return t.stop()}}),Gr)}function Qr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Nr,Wr);case 2:case"end":return t.stop()}}),Vr)}function qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Br=[Mr,Qr],Kr=(0,j.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Hr),{toast:{type:"",message:"",show:!1}});function Yr(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zr,Jr=function(e){return e.messageShortcutGroupReducer||{groups:[],status:"",currentGroupType:-1,currentGroupId:-1}},Xr=(0,t.createSelector)(Jr,(function(e){return e.status})),$r=(0,t.createSelector)(Jr,(function(e){return e.currentGroupType})),Zr=(0,t.createSelector)(Jr,(function(e){return e.currentGroupId})),en=(0,t.createSelector)(Jr,(function(e){return e.groups})),tn=(0,t.createSelector)(en,(function(e){return e.filter((function(e){return e.group_type===n.MessageShortcutGroupType.PERSONAL}))})),rn=(0,t.createSelector)(en,(function(e){return e.filter((function(e){return e.group_type===n.MessageShortcutGroupType.TEAM}))})),nn=(0,t.createSelector)(en,$r,(function(e,t){return-1===t?e:e.filter((function(e){return e.group_type===t}))})),on=(0,t.createSelector)(tn,(function(e){return e.reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),cn=(0,t.createSelector)(rn,(function(e){return e.reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),un=(0,t.createSelector)(on,cn,(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Yr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),Yr(e))})),an=(0,t.createSelector)(un,(function(e){var t=e.filter((function(e){return!(null==e||!e.pin_time)})).sort((function(e,t){return e.pin_time-t.pin_time})),r=e.filter((function(e){return!(null!=e&&e.pin_time)}));return[].concat(Yr(t),Yr(r))})),sn=(0,t.createSelector)(an,$r,Zr,(function(e,t,r){var n=-1===t?e:e.filter((function(e){return e.group_type===t}));return-1===r?n:n.filter((function(e){return e.groupId===r}))})),ln=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.settings)||{}},fn=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.needForceUpdate)||!1},dn=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.status)||""},pn=function(e){var t;return(null==e||null===(t=e.settingsReducer)||void 0===t?void 0:t.fetchStatus)||""},Sn=(0,t.createSelector)(ln,(function(e){return e.auto_translation_status||""})),En=(0,t.createSelector)(ln,(function(e){return e.message_shortcuts_status||""})),_n=(0,t.createSelector)(ln,(function(e){return e.legacy_message_shortcuts_count||0})),gn=(0,t.createSelector)(ln,(function(e){return e.distribution_account_status||"enabled"})),On=(0,t.createSelector)(ln,(function(e){return e.display_banner||!1})),vn=regeneratorRuntime.mark(hn);function hn(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,e.put)((0,Ke.fetchSettingsStatus)({fetchStatus:n.DataFetchStatus.PENDING}));case 3:return r.next=5,(0,e.call)(y.fetch,{parent:"user",resource:"setting"});case 5:return t=r.sent,r.next=8,(0,e.put)((0,Ke.fetchSettingsSucceeded)({settings:t,fetchStatus:n.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return r.abrupt("return",t);case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,(0,e.put)((0,Ke.fetchSettingsStatus)({fetchStatus:n.DataFetchStatus.FAILED}));case 15:return r.abrupt("return",{});case 16:case"end":return r.stop()}}),vn,null,[[0,11]])}!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH",e.OPEN_MALL_URL="OPEN_MALL_URL"}(zr||(zr={}));var mn=regeneratorRuntime.mark(bn),Tn=regeneratorRuntime.mark(Dn),An=(0,j.createActions)(A({},zr.OPEN_MALL_URL,(function(e){return{path:e.path,region:e.region}}))).openMallUrl,Rn="xiapibuy.com";function bn(t){var r,o,c,u,a,i,s,l,f,d,p,S;return regeneratorRuntime.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(r=t.payload,o=r.path,c=void 0===o?"":o,u=r.region,"cn"!==(i=(a=void 0===u?"":u)?a.toLowerCase():(0,n.getRuntimeRegion)())&&"kr"!==i||(i="my"),l=c?c.startsWith("/")?c:"/".concat(c):"",!(0,n.isVisitingCn)()){E.next=21;break}return E.prev=5,E.next=8,(0,e.call)(y.fetch,{url:"https://".concat((0,n.getSCApiServer)(),"/selleraccount/nonce/get/")});case 8:f=E.sent,d=f.data,p="".concat((0,n.cnDomainHash)(i),".").concat((0,n.envPrefix)()).concat(Rn),S=encodeURIComponent(window.btoa('{"next":"https://'.concat(p).concat(l,'"}'))),l="/api/seller_platform/nonce/callback/?nonce=".concat(d.nonce,"&region=").concat(i,"&state=").concat(S),s="https://".concat(p).concat(l),E.next=19;break;case 16:E.prev=16,E.t0=E.catch(5),s="https://".concat((0,n.cnDomainHash)(i),".").concat((0,n.envPrefix)()).concat(Rn).concat(l);case 19:E.next=22;break;case 21:s="https://".concat((0,n.domainPrefix)(),".").concat((0,n.domainSuffix)(i)).concat(l);case 22:window.open(s);case 23:case"end":return E.stop()}}),mn,null,[[5,16]])}function Dn(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(An,bn);case 2:case"end":return t.stop()}}),Tn)}var Cn=(0,j.createActions)(A({},zr.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,yn=(0,j.createActions)(A({},zr.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,Pn=[Dn],wn=(0,t.createSelector)(c,(function(e){return e.offers||{}})),Un=function(e,r,o,c){return(0,t.createSelector)(wn,(function(t){return Object.values(t).filter((function(t){return t.product_id===c&&t.model_id===r&&t.conversation_id===e&&t.id!==o&&t.status===n.OfferStatus.PENDING}))}))},Nn=function(e){return(0,t.createSelector)(c,(function(t){return(0,z.denormalize)(e,y.offerSchema,t)}))},In=(0,j.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;window.addExternalGlobal("resetAction",In);var jn=function(e){var t;return(null===(t=e.draftReducer)||void 0===t?void 0:t.draftHash)||{}},xn=function(e){return(0,t.createSelector)(jn,(function(t){return t[e]||""}))},kn=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.translationSettings)||{}},Ln=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.fetchSettingsStatus)||""},Mn=function(e){var t;return(null==e||null===(t=e.translatePreferenceReducer)||void 0===t?void 0:t.updateStatus)||""},Hn=regeneratorRuntime.mark(Vn);function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vn(t,r,n){var o,c,u,a,i=arguments;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=i.length>3&&void 0!==i[3]?i[3]:[],c=t,u=[],a=[],Array.isArray(t)&&(c=((0,y.normalize)(n,t).entities||{})[n]||{}),r.forEach((function(t){var r=t.id,i=c[r];i?["conversations","agentConversations"].includes(n)&&(void 0!==i.faking||i.latestMessageStatus||void 0!==i.unreplied)?(delete(t=Gn(Gn({},i),t)).faking,delete t.latestMessageStatus,delete t.unreplied,a.push(t)):(o.length&&o.forEach((function(e){t[e]=i[e]})),u.push((0,e.put)(L({name:n,id:r,record:Gn({},t)})))):a.push(t)})),a.length&&u.push((0,e.put)(k({entities:(0,y.normalize)(n,a).entities}))),s.next=9,(0,e.all)(u);case 9:case"end":return s.stop()}}),Hn)}var Wn,Qn,qn=function(e){return(0,t.createSelector)(d,(function(t){return(0,z.denormalize)(e,[y.productSchema],{products:t})}))},Bn=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(Wn||(Wn={}));var Kn,Yn=(0,j.createActions)((A(Qn={},Wn.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),A(Qn,Wn.CLEAR_REPORT_REQUESTED,(function(){return{}})),Qn)),zn=Yn.reportRequested,Jn=Yn.clearReportRequested,Xn=regeneratorRuntime.mark(to),$n=regeneratorRuntime.mark(ro);function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function to(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.select)(Bn);case 2:if(!(t=o.sent).length){o.next=10;break}return r=Yr(t),o.next=7,(0,e.put)(Jn());case 7:return r.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),o.next=10,(0,e.call)(y.fetch,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(eo(eo({},r[0]),{},{platform_id:(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)()?2:1}))});case 10:case"end":return o.stop()}}),Xn)}function ro(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,e.delay)(6e4);case 3:return t.next=5,to();case 5:t.next=0;break;case 7:case"end":return t.stop()}}),$n)}var no=(A(Kn={},Wn.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Yr(e.beingReported),[{event_time:n,url:o}])}})),A(Kn,Wn.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Kn);function oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var co,uo,ao=[ro],io=(0,j.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},no),{beingReported:[]});function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.ADD_NEED_CAPTCHA_REQUEST="ADD_NEED_CAPTCHA_REQUEST",e.DELETE_CAPTCHA_REQUEST="DELETE_CAPTCHA_REQUEST",e.CLEAR_NEED_CAPTCHA_REQUEST="CLEAR_NEED_CAPTCHA_REQUEST",e.RESEND_NEED_CAPTCHA_REQUEST="RESEND_NEED_CAPTCHA_REQUEST"}(co||(co={}));var fo,po=(A(uo={},co.ADD_NEED_CAPTCHA_REQUEST,(function(e,t){var r=t.payload.request,n=Yr(e.verifyRequests);return n.push(r),lo(lo({},e),{},{verifyRequests:n})})),A(uo,co.DELETE_CAPTCHA_REQUEST,(function(e){var t=Yr(e.verifyRequests);return t.pop(),lo(lo({},e),{},{verifyRequests:t})})),A(uo,co.CLEAR_NEED_CAPTCHA_REQUEST,(function(e){return lo(lo({},e),{},{verifyRequests:[]})})),uo),So=(0,j.createActions)((A(fo={},co.ADD_NEED_CAPTCHA_REQUEST,(function(e){return{request:e.request}})),A(fo,co.DELETE_CAPTCHA_REQUEST,(function(){return{}})),A(fo,co.CLEAR_NEED_CAPTCHA_REQUEST,(function(){return{}})),A(fo,co.RESEND_NEED_CAPTCHA_REQUEST,(function(){return{}})),fo)),Eo=So.addNeedCaptchaRequest,_o=So.deleteCaptchaRequest,go=So.clearNeedCaptchaRequest,Oo=So.resendNeedCaptchaRequest,vo=regeneratorRuntime.mark(Ao),ho=regeneratorRuntime.mark(Ro);function mo(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return To(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?To(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,c=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw c}}}}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ao(){var t,r,n,o,c,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,e.select)(yo);case 3:if(!(t=a.sent).length){a.next=35;break}return a.next=7,(0,e.put)(go());case 7:r=mo(t),a.prev=8,r.s();case 10:if((n=r.n()).done){a.next=27;break}o=n.value,c=o.id,u=o.extra,a.t0=c,a.next="unread-count"===a.t0?16:"unread-count-single"===a.t0?19:"send-message"===a.t0?22:25;break;case 16:return a.next=18,(0,e.spawn)(Ke.doRefreshTotalUnreadConversationsCount,u);case 18:return a.abrupt("break",25);case 19:return a.next=21,(0,e.spawn)(doRefreshSingleShopUnreadConversationCount,u);case 21:return a.abrupt("break",25);case 22:return a.next=24,(0,e.put)((0,Ke.resendMessageRequested)(u));case 24:return a.abrupt("break",25);case 25:a.next=10;break;case 27:a.next=32;break;case 29:a.prev=29,a.t1=a.catch(8),r.e(a.t1);case 32:return a.prev=32,r.f(),a.finish(32);case 35:a.next=39;break;case 37:a.prev=37,a.t2=a.catch(0);case 39:case"end":return a.stop()}}),vo,null,[[0,37],[8,29,32,35]])}function Ro(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Oo,Ao);case 2:case"end":return t.stop()}}),ho)}function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Do=(0,j.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},po),{verifyRequests:[]}),Co=[Ro],yo=function(e){return e.captchaVerifyReducer.verifyRequests},Po=regeneratorRuntime.mark(wo);function wo(t,r,n){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.takeEvery)(t,regeneratorRuntime.mark((function t(o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=o.payload.id){t.next=5;break}return t.next=4,(0,e.call)(r,o);case 4:return t.abrupt("return");case 5:return t.next=7,(0,e.race)({task:(0,e.call)(r,o),cancel:(0,e.take)((function(e){return e.type===n.toString()&&e.payload.id===c}))});case 7:case"end":return t.stop()}}),t)})));case 2:case"end":return o.stop()}}),Po)}}(),S}())},53402:function(e,t,r){"use strict";e.exports=r(88377)}}]);